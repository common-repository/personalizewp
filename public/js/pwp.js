(()=>{"use strict";window.PersonalizeWP=new class{userData={};utils={pwpGet:(e,t=!1,i="personalizewp")=>{const n=localStorage.getItem(`${i}_${e}`);return n?t?JSON.parse(n):n:null},pwpStore:(e,t,i="personalizewp")=>{localStorage.setItem(`${i}_${e}`,JSON.stringify(t))},pwpClear:(e,t="personalizewp")=>{localStorage.removeItem(`${t}_${e}`)},callApi:async(e,t)=>{try{document.location;const i=await fetch(`${this.baseUrl}${e}`,{method:"POST",cache:"no-cache",headers:{Accept:"application/json, */*;q=0.1","Cache-Control":"no-cache, private","Content-type":"application/json","X-Requested-With":"XMLHttpRequest",...window.pwpSettings&&window.pwpSettings.nonce&&{"X-WP-Nonce":window.pwpSettings.nonce}},body:JSON.stringify(t)});if(!i.ok)throw new Error(`Response status: ${i.status}`);return await i.json()}catch(e){console.error("API Error:",e)}return null},nodeScriptReplace:e=>{if("SCRIPT"===e.tagName)e.parentNode.replaceChild(this.utils.nodeScriptClone(e),e);else for(var t=-1,i=e.childNodes;++t<i.length;)this.utils.nodeScriptReplace(i[t]);return e},nodeScriptClone:e=>{var t=document.createElement("script");t.text=e.innerHTML;for(var i,n=-1,s=e.attributes;++n<s.length;)t.setAttribute((i=s[n]).name,i.value);return t}};#e(){const e=(new Date).getHours();return e>=0&&e<6?"nighttime":e>=6&&e<12?"morning":e>=12&&e<18?"afternoon":e>=18&&e<=23?"evening":""}#t(e,t){return e=parseInt(e),t=parseInt(t),isNaN(e)||isNaN(t)?0:(t>e&&(t=Math.round(t/1e3)),Math.round((e-t)/86400))}#i(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}#n(){const e=navigator.userAgent.toLowerCase();return/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)}#s(){const e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"windows":/android/i.test(e)?"android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"ios":""}#o(){const e=this.#s();return this.#i()?["mobile",e]:this.#n()?["tablet",e]:["desktop"]}constructor(){var e;this.pwpLoaded=[],this.baseUrl=(window.pwpSettings?window.pwpSettings.root:"/wp-json/")+"personalizewp/",this.readyQueue=[],this.readyExecuted=!1;const t=Math.round(Date.now()/1e3),i=(new Date).toTimeString();this.userData={timeOfDay:this.#e(),currentTime:i.substring(0,i.indexOf(" ")),currentTimestamp:(new Date).toISOString(),isReturningVisitor:!0,daysSinceLastVisit:0,deviceType:this.#o(),uid:null!==(e=this.utils.pwpGet("tracked_user",!0,"pwp")?.id)&&void 0!==e?e:""};const n=this.utils.pwpGet("first_visit");null===n?(this.utils.pwpStore("first_visit",t),this.userData.isReturningVisitor=!1):n>t?this.utils.pwpStore("first_visit",Math.round(n/1e3)):1>this.#t(t,parseInt(n))&&(this.userData.isReturningVisitor=!1);var s,o=sessionStorage.getItem("personalizewp_last_session");null===o||isNaN(parseInt(o))?(o=parseInt(null!==(s=this.utils.pwpGet("last_visit"))&&void 0!==s?s:t),sessionStorage.setItem("personalizewp_last_session",o)):parseInt(o)>t&&(o=Math.round(parseInt(o)/1e3),sessionStorage.setItem("personalizewp_last_session",o)),this.userData.daysSinceLastVisit=this.#t(t,o),this.utils.pwpStore("last_visit",t)}async getBlocks(e,t="v2/blocks"){if(0===e.length)return null;const i={...this.userData,location:location.pathname,blocks:e,urlQueryString:window.location.search+window.location.hash,referrerURL:document.referrer},n=await this.utils.callApi(t,i);return n&&n.length?n:null}#a(e,t){const i=()=>{this.#r(e,t)},n={once:!0};document.body.addEventListener("mousemove",i,n),document.body.addEventListener("scroll",i,n),document.body.addEventListener("keydown",i,n),document.body.addEventListener("click",i,n),document.body.addEventListener("touchstart",i,n)}#r(e,t){this.pwpLoaded.indexOf(t)>=0||(e(),this.pwpLoaded.push(t))}initialiseOnLoad(e,t){window.pwpSettings.delayInit?this.#a(e,t):this.#r(e,t)}ready(){this.readyExecuted=!0;for(let e of this.readyQueue)e.ready(this)}module(e,t,i=!1){const n=()=>{t.init&&t.init(),t.ready&&(this.readyExecuted?t.ready():this.readyQueue.push(t))};i?n():this.initialiseOnLoad(n,e)}};const e=[];class t extends HTMLElement{constructor(){super()}connectedCallback(){this.blockId&&(void 0===e[this.delayed]&&(e[this.delayed]={parsing:!1,elements:[]}),e[this.delayed].elements.push(this))}get blockId(){return this.getAttribute("block-id")}get delayed(){let e=this.getAttribute("delayed");return e?Number(e):0}get lifetime(){let e=this.getAttribute("lifetime");return e?Number(e):0}}window.customElements.define("pwp-block",t);const i=()=>{Object.keys(e).forEach((function(t){if(e[t].parsing)return;e[t].parsing=!0;const n=e[t].elements;let s=[];for(let e of n)s.push(e.blockId);s.length?PersonalizeWP.getBlocks(s).then((s=>{if(!Array.isArray(s))throw"No blocks to parse";const o=[];s.forEach((function(e){const t=n.shift();e?o.push([t,e]):t.remove()})),o.length&&setTimeout((function(){o.forEach((function(e){const t=e[0].parentNode;let i=document.createElement("div");if(i.innerHTML=e[1],i=PersonalizeWP.utils.nodeScriptReplace(i),e[0].lifetime){const t=1e3*e[0].lifetime,n=i.childNodes;for(const e of n)setTimeout((function(){e.remove()}),t)}e[0].replaceWith(...i.childNodes);const n=new CustomEvent("PWP:parsePlaceholder",{bubbles:!0,cancelable:!0,detail:{container:t}});t.dispatchEvent(n)})),document.dispatchEvent(new CustomEvent("DOMContentLoaded"));const e=new CustomEvent("PWP:parsedPlaceholders",{bubbles:!0,cancelable:!0});document.dispatchEvent(e),i()}),1e3*t),e[t].parsing=!1})).catch((e=>{console.log(e)})):e[t].parsing=!1}))};PersonalizeWP.initialiseOnLoad(i,"pwp"),PersonalizeWP.ready()})();